
{% extends "index.html" %}
{% block title %}room{% endblock %}

{% block chat %}

    <section class="container my-2">
        <h2 class="container display-6 border-bottom">chat
            <sup class="mx-4">
                {{ user.nickname }}
            </sup>
        </h2>
        <p class="subtitle">simple-chat django channels redis</p>
        <div class="card">
            <label class="card-header" for="room-name-input">What chat room would you like to enter?</label>
            <input type="text" class="form-control mt-4" id="room-name-input">
        </div>
        <div class="card-footer mt-4">
            <input id="room-name-submit" class="btn btn-primary btn-sm" type="button" value="enter"/>
        </div>

    </section>

{% endblock %}


{% block js %}
<script>
    $('#room-name-input').focus();
    $('#room-name-input').keyup((e) => {
      if (e.keyCode === 13) { // enter, return
            $('#room-name-submit').click();
        }
    });
    $('#room-name-submit').click(() => {
      const room_name = $('#room-name-input').val();
      window.location.pathname = `/chat/${room_name}/`;
    });
</script>
{% endblock %}